import{r as n,j as e,d as k}from"./client-BM5fYXQq.js";const N="_editor_input_upzeh_1",g={editor_input:N};function S(){const[t,a]=n.useState([]),[r,s]=n.useState(null);n.useEffect(()=>{l()},[]);async function l(){let i=await(await fetch("http://localhost:5173/api/products")).json();a(i)}function c(o){o==null&&(s(null),l());let i=t.find(u=>u._id==o);i&&s({...i})}return e.jsxs("div",{className:"flex h-full relative pl-10 gap-10 w-full",children:[e.jsx(V,{product:r,close:c}),e.jsx("div",{className:"flex pt-4 flex-row gap-14",children:t.map((o,i)=>e.jsx(b,{data:o,change:c},i))}),e.jsx("div",{className:"border-l-[1px] p-4 pt-8 text-lg border-gray-100",children:"Изменить или добавить продукт."})]})}function b({data:t,change:a,edit:r=!1}){var c;const[s,l]=n.useState(t);return n.useEffect(()=>{l(t)},[t]),e.jsxs("div",{className:"flex flex-col items-center gap-2 leading-4",children:[e.jsx("img",{src:"/32093976.jpg",style:{width:r?"242px":"180px"},className:"",alt:""}),e.jsx("span",{className:"font-bold text-[16px]",children:s.name}),e.jsx("span",{className:"text-[14px] whitespace-pre text-center",children:s.description.split("").reduce((o,i,u)=>u>0&&u%37==0?o+i+`
`:o+i,"")}),e.jsx("span",{className:"text-[14px] font-bold",children:((c=s.price.toString().match(/\d{1,3}(?=(\d{3})*$)/g))==null?void 0:c.join(" "))+" р."}),r?e.jsx(e.Fragment,{}):e.jsx("button",{onClick:()=>a(s._id),className:"rounded-md px-4 shadow-sm hover:shadow-md hover:bg-gray-50 bg-white py-2 border border-black",children:"Изменить"})]})}function V({product:t,close:a}){let r={name:"",category:"",price:0,description:"",_id:""};const[s,l]=n.useState(t||r),[c,o]=n.useState(null),[i,u]=n.useState(!1),[j,m]=n.useState("");if(n.useEffect(()=>{t&&l(t)},[t]),t==null)return e.jsx(e.Fragment,{});function h(d,x){l(p=>(p[x]=d,p)),u(p=>!p)}async function y(d){d.preventDefault();let x=new FormData;Object.keys(s).forEach(v=>x.append(v,String(s[v]))),x.append("files",c);let p=await fetch("/api/putProduct",{method:"POST",body:x}),w=await p.json();if(p.status!==200){m(JSON.stringify(w.message));return}m(w.message)}return e.jsx("div",{onClick:()=>{a(null),m("")},className:"absolute shadow-2xl bg-black bg-opacity-20 left-0 right-0 top-0 bottom-0 flex justify-center items-center",children:e.jsxs("div",{onClick:d=>d.stopPropagation(),className:"bg-white flex flex-row rounded-3xl p-10 gap-12",children:[e.jsx(b,{edit:!0,data:s,change:a}),e.jsxs("form",{onSubmit:d=>y(d),className:"flex flex-col",children:[e.jsx("span",{children:"Название"}),e.jsx(f,{className:g.editor_input,value:s.name,setter:h,property:"name"}),e.jsx("span",{children:"Описание"}),e.jsx(f,{className:g.editor_input,value:s.description,setter:h,property:"description"}),e.jsx("span",{children:"Цена"}),e.jsx(f,{className:g.editor_input,value:s.price,setter:h,property:"price",num:!0}),e.jsx("span",{children:"Фото"}),e.jsx("input",{className:"mb-[14px]",accept:"image/png, image/jpeg",onChange:d=>o(d.target.files&&d.target.files[0]),type:"file"}),e.jsx("span",{children:"Категория"}),e.jsx("select",{className:g.editor_input,children:e.jsx("option",{value:s.category,children:s.category})}),j?e.jsx("span",{className:"mx-auto my-3 text-lg underline",children:j}):e.jsx(e.Fragment,{}),e.jsx("button",{className:"px-4 py-2 border-black shadow-sm hover:shadow-md hover:bg-gray-50 border w-fit h-fit mx-auto mt-[14px]",type:"submit",children:"Изменить"})]})]})})}function f({value:t,property:a,setter:r,num:s=!1,className:l=""}){const[c,o]=n.useState(t);return n.useEffect(()=>{o(t)},[t]),n.useEffect(()=>{r(c,a)},[c]),e.jsx("input",{className:l,value:c,onChange:i=>o(i.target.value),type:s?"number":"text"})}const _="data:image/svg+xml,%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Transformed%20by:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20id='meteor-icon-kit__regular-products'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'/%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10%209C9.44771%209%209%209.44771%209%2010V21C9%2021.5523%209.44771%2022%2010%2022H21C21.5523%2022%2022%2021.5523%2022%2021V10C22%209.44771%2021.5523%209%2021%209H10ZM15%207V3C15%202.44772%2014.5523%202%2014%202H3C2.44772%202%202%202.44772%202%203V14C2%2014.5523%202.44772%2015%203%2015H7V10C7%208.34315%208.34315%207%2010%207H15ZM17%207H21C22.6569%207%2024%208.34315%2024%2010V21C24%2022.6569%2022.6569%2024%2021%2024H10C8.34315%2024%207%2022.6569%207%2021V17H3C1.34315%2017%200%2015.6569%200%2014V3C0%201.34315%201.34315%200%203%200H14C15.6569%200%2017%201.34315%2017%203V7Z'%20fill='%23000000'/%3e%3c/g%3e%3c/svg%3e",P="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.1992%2012C12.9606%2012%2015.1992%209.76142%2015.1992%207C15.1992%204.23858%2012.9606%202%2010.1992%202C7.43779%202%205.19922%204.23858%205.19922%207C5.19922%209.76142%207.43779%2012%2010.1992%2012Z'%20stroke='%23000000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M1%2022C1.57038%2020.0332%202.74795%2018.2971%204.36438%2017.0399C5.98081%2015.7827%207.95335%2015.0687%2010%2015C14.12%2015%2017.63%2017.91%2019%2022'%20stroke='%23000000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.8205%204.44006C18.5822%204.83059%2019.1986%205.45518%2019.579%206.22205C19.9594%206.98891%2020.0838%207.85753%2019.9338%208.70032C19.7838%209.5431%2019.3674%2010.3155%2018.7458%2010.9041C18.1243%2011.4926%2017.3302%2011.8662%2016.4805%2011.97'%20stroke='%23000000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M17.3203%2014.5701C18.6543%2014.91%2019.8779%2015.5883%2020.8729%2016.5396C21.868%2017.4908%2022.6007%2018.6827%2023.0003%2020'%20stroke='%23000000'%20stroke-width='1.5'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";function E(){return e.jsx("div",{children:"123"})}function M(){const[t,a]=n.useState(0);function r(s){a(s)}return e.jsx("div",{className:"h-full w-full px-4",children:e.jsxs("div",{className:"h-full overflow-hidden flex",children:[e.jsxs("div",{className:"flex flex-col pl-4 py-8 gap-4 text-2xl",children:[e.jsx(C,{choosen:t,svg:_,setter:r,page:0,children:"Каталог"}),e.jsx(C,{choosen:t,svg:P,setter:r,page:1,children:"Пользователи"})]}),e.jsxs("div",{className:"border-l-[1px] border-gray-100 w-full flex",children:[t==0?e.jsx(S,{}):e.jsx(e.Fragment,{}),t==1?e.jsx(E,{}):e.jsx(e.Fragment,{})]})]})})}function C({svg:t,setter:a,page:r,choosen:s,children:l}){return e.jsx("div",{className:"flex mr-4",children:e.jsxs("div",{style:{background:s==r?"rgb(243 244 246)":""},onClick:()=>a(r),className:"flex w-full select-none cursor-pointer shadow-md hover:shadow-lg hover:bg-gray-50 flex-row px-6 py-2 gap-3 border-[1px] border-gray-100 rounded-lg",children:[e.jsx("span",{style:{textDecoration:s===r?"underline1":""},children:l}),e.jsx("img",{className:"max-w-[35px] aspect-square",src:t,alt:"0"})]})})}function D(){return e.jsx(M,{})}const G=k(document.getElementById("root"));G.render(e.jsx(D,{}));
